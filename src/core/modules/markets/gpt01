,,,js
// ===========================================
// 🧠 QonexAI Supervision Layer: CCLM² + GPT-01
// ===========================================

const { CCLM2 } = require("./src/core/CCLM2/coreGovernor");
const GPT01 = require("./src/core/modules/market/gpt01");

(async () => {
  try {
    console.log("🧠 Initializing CCLM² supervision layer...");

    const cclm = new CCLM2({
      ethicsMode: "quantum",
      auditLog: path.join(__dirname, "logs/system.log"),
      supervision: true,
    });

    const module01 = require(path.join(__dirname, "src/core/modules/market/"));
    const handshake = await cclm.register({
      id: "GPT-01",
      name: "Market Data Aggregator",
      module: module01,
      kernel: GPT01,
      level: "root",
      active: true,
    });

    if (handshake.status === "ok") {
      console.log("✅ CCLM² supervising GPT-01 (Market Data Aggregator).");
    } else {
      console.warn("⚠️ CCLM² handshake issue:", handshake);
    }

    await cclm.observeAll("src/core/modules/");
    console.log("👁 CCLM² now monitoring subordinate modules.");
  } catch (err) {
    console.error("❌ Error initializing CCLM² supervision:", err);
    fs.appendFileSync(
      path.join(__dirname, "logs/system.log"),
      `[${new Date().toISOString()}] ERROR: ${err}\n`
    );
  }
})();
