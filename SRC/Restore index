name: Restore Index

on:
  workflow_dispatch:   # Manual trigger from GitHub UI

jobs:
  restore:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Restore index.html from backup
        run: cp repo2/backup/index.html index.html

      - name: Commit and push restored file
        run: |
          git config user.name "github-actions"
          git config user.email "actions@github.com"
          git add index.html
          git commit -m "Restore index.html from repo2/backup"
          git push

name: Backup Index (repo2)

on:
  push:
    paths:
      - "index.html"   # Only run when index.html changes

jobs:
  backup:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Ensure backup folder exists
        run: mkdir -p repo2/backup

      - name: Copy index.html to backup location
        run: cp index.html repo2/backup/index.html

      - name: Commit and push backup
        run: |
          git config user.name "github-actions"
          git config user.email "actions@github.com"
          git add repo2/backup/index.html
          git commit -m "Auto-backup index.html -> repo2/backup/index.html"
          git push
