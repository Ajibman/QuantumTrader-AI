 <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quantum Trader AIâ„¢ â€” TraderLab</title>

<style>
:root {
  --bg: #050b1f;
  --card: #0b1736;
  --accent: #7cf3ff;
  --text: #ffffff;
  --success: #0aff7c;
  --error: #ff3b3b;
  --hint: #ffd966;
}

body {
  background: var(--bg);
  color: var(--text);
  font-family: Arial, sans-serif;
  margin: 0;
}

header {
  padding: 20px;
  text-align: center;
  background: var(--card);
}

.content {
  padding: 20px;
}

button {
  background: #17336d;
  color: white;
  border: none;
  padding: 10px 18px;
  margin: 5px 5px 5px 0;
  border-radius: 5px;
  cursor: pointer;
}

button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

#ori-ologo {
  background: #08162f;
  border-left: 4px solid var(--accent);
  padding: 12px;
  border-radius: 6px;
  margin-bottom: 15px;
}

#ori-title {
  color: var(--accent);
  font-weight: bold;
}

#assessment-container {
  background: var(--card);
  padding: 15px;
  border-radius: 8px;
  display: none;
}

#progress-bar-container {
  height: 18px;
  background: #111;
  border-radius: 6px;
  overflow: hidden;
  margin: 10px 0;
}

#progress-bar {
  height: 100%;
  width: 0%;
  background: var(--accent);
  transition: width 0.5s;
}

#step-blocks {
  display: flex;
  gap: 5px;
  margin-bottom: 10px;
}

.step-block {
  flex: 1;
  height: 12px;
  background: #444;
  border-radius: 3px;
}

.feedback {
  font-weight: bold;
  margin-top: 6px;
}
</style>
</head>

<body>

<header>
  <h1>Quantum Trader AIâ„¢ â€” TraderLab</h1>
  <p>Peace before Profits</p>
</header>

<div class="content">

  <!-- Ori Ologo -->
  <div id="ori-ologo">
    <div id="ori-title">ðŸ§  Ori Ologo â€” AI Assistant</div>
    <div id="ori-speech"></div>
  </div>

  <!-- Controls -->
  <button id="start-assessment">Start TraderLab Assessment</button>
  <button id="reset-subscription">Reset Subscription</button>
  <p id="status-message"></p>

  <!-- Assessment -->
  <div id="assessment-container">
    <div id="step-blocks"></div>
    <div id="progress-bar-container">
      <div id="progress-bar"></div>
    </div>

    <p id="assessment-step"></p>
    <button id="hint-btn">Ask for Hint</button>
    <p id="feedback" class="feedback"></p>
    <p id="final-score"></p>
  </div>

</div>

<script>
/* =========================
   SUBSCRIPTION GATE
========================= */
const SUB_KEY = "qtai_traderlab_subscription";
const SUB_DURATION = 30 * 24 * 60 * 60 * 1000;

function initSubscription() {
  if (!localStorage.getItem(SUB_KEY)) {
    const expiry = new Date(Date.now() + SUB_DURATION);
    localStorage.setItem(SUB_KEY, JSON.stringify({ expiry }));
  }
}

function subscriptionActive() {
  const data = JSON.parse(localStorage.getItem(SUB_KEY));
  return new Date() < new Date(data.expiry);
}

function updateStatus() {
  const msg = document.getElementById("status-message");
  if (subscriptionActive()) {
    msg.textContent = "TraderLab access active.";
  } else {
    msg.textContent = "Subscription inactive.";
    document.getElementById("start-assessment").disabled = true;
  }
}

/* =========================
   ORI OLOGO
========================= */
const oriSpeech = document.getElementById("ori-speech");

function oriSpeak(text) {
  oriSpeech.textContent = text;
}

/* =========================
   ASSESSMENT LOGIC
========================= */
const steps = [
  "Simulate opening a trade position.",
  "Analyze market trends.",
  "Apply stop-loss discipline.",
  "Execute a mock trade.",
  "Review performance."
];

const hints = [
  "Open trades only with intent.",
  "Follow trend, not emotion.",
  "Stop-loss preserves capital.",
  "Execution must be deliberate.",
  "Reflection builds mastery."
];

let currentStep = 0;
let score = 0;

const container = document.getElementById("assessment-container");
const stepText = document.getElementById("assessment-step");
const feedback = document.getElementById("feedback");
const finalScore = document.getElementById("final-score");
const progressBar = document.getElementById("progress-bar");
const blocks = document.getElementById("step-blocks");

function setupBlocks() {
  blocks.innerHTML = "";
  steps.forEach(() => {
    const b = document.createElement("div");
    b.className = "step-block";
    blocks.appendChild(b);
  });
}

function updateProgress() {
  progressBar.style.width = (score / 100) * 100 + "%";
}

function startAssessment() {
  if (!subscriptionActive()) return;

  oriSpeak(
    "Welcome. I am Ori Ologo. This session values discipline over speed. Peace before Profits."
  );

  container.style.display = "block";
  currentStep = 0;
  score = 0;
  finalScore.textContent = "";
  feedback.textContent = "";
  setupBlocks();
  updateProgress();
  runStep();
}

function runStep() {
  if (currentStep >= steps.length) return endAssessment();

  oriSpeak(`Step ${currentStep + 1}. ${steps[currentStep]}`);
  stepText.textContent = steps[currentStep];
  feedback.textContent = "";

  setTimeout(() => {
    const pass = Math.random() < 0.9;
    const block = blocks.children[currentStep];

    if (pass) {
      score += 20;
      block.style.background = "var(--success)";
      oriSpeak("Well executed. Control is strength.");
    } else {
      block.style.background = "var(--error)";
      oriSpeak("Pause. Review your discipline.");
    }

    updateProgress();
    currentStep++;
    setTimeout(runStep, 1400);
  }, 900);
}

function endAssessment() {
  stepText.textContent = "Assessment completed.";
  finalScore.textContent = `Final Score: ${score} / 100`;

  if (score >= 80) {
    oriSpeak("You demonstrate readiness. Proceed with caution.");
  } else if (score >= 50) {
    oriSpeak("Remain in TraderLab. Refinement precedes growth.");
  } else {
    oriSpeak("Return to fundamentals. Mastery begins here.");
  }

  localStorage.setItem("traderlab_last_score", JSON.stringify({
    score,
    date: new Date().toISOString()
  }));
}

/* =========================
   HINT SYSTEM
========================= */
document.getElementById("hint-btn").onclick = () => {
  if (currentStep < steps.length) {
    oriSpeak(hints[currentStep] + " Assistance aids learning, but independence builds mastery.");
    score = Math.max(0, score - 5);
    updateProgress();
  }
};

/* =========================
   CONTROLS
========================= */
document.getElementById("start-assessment").onclick = startAssessment;
document.getElementById("reset-subscription").onclick = () => {
  const expiry = new Date(Date.now() + SUB_DURATION);
  localStorage.setItem(SUB_KEY, JSON.stringify({ expiry }));
  updateStatus();
  oriSpeak("Subscription refreshed. Use this time wisely.");
};

/* =========================
   INIT
========================= */
initSubscription();
updateStatus();
oriSpeak("TraderLab ready. Begin when you are prepared.");
</script>

</body>
</html>
