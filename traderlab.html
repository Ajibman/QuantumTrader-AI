
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quantum Trader AIâ„¢ â€” TraderLab</title>

<style>
:root {
  --bg: #050b1f;
  --card: #0b1736;
  --panel: #0e1f44;
  --accent: #7cf3ff;
  --text: #ffffff;
  --notice: #ffcc66;
  --success: #0aff7c;
  --error: #ff3b3b;
}

body { margin:0; font-family: Arial, sans-serif; background: var(--bg); color: var(--text); }
header { padding:20px; text-align:center; background: var(--card); }
main { padding:20px; max-width:900px; margin:auto; }
.panel { background: var(--panel); border-radius:12px; padding:16px; margin-bottom:20px; }
h2 { color: var(--accent); margin-top:0; }
.notice { color: var(--notice); font-size:0.9rem; }
button { background: var(--accent); border:none; padding:10px 16px; border-radius:8px; font-weight:bold; cursor:pointer; }
button:disabled { opacity:0.5; cursor:not-allowed; }
input { width:100%; padding:10px; margin:10px 0; border-radius:6px; border:none; }
#walletHistory { max-height:200px; overflow-y:auto; padding-left:20px; }
#ori-ologo { border-left:4px solid var(--accent); padding-left:12px; }
#ori-title { color: var(--accent); font-weight:bold; }
</style>
</head>

<body>

<header>
  <h1>Quantum Trader AIâ„¢ â€” TraderLab</h1>
  <p>Peace before Profits</p>
</header>

<main>

<!-- Ori Ologo -->
<div class="panel" id="ori-ologo">
  <div id="ori-title">ðŸ§  Ori Ologo â€” AI Assistant</div>
  <p id="oriSpeech"></p>
</div>

<!-- Wallet Panel -->
<div class="panel">
  <h2>Trading Wallet</h2>
  <p class="notice">Trading capital is separate from subscription payment. Funding the wallet does not start trading.</p>
  <p>Status: <strong id="walletStatus">Inactive</strong></p>
  <p>Balance: <strong id="walletBalance">â‚¦0</strong></p>
  <input type="number" id="walletAmount" placeholder="Enter amount (min â‚¦10,000)">
  <button id="fundWalletBtn">Fund Wallet</button>
  <p id="walletMsg" class="notice"></p>
</div>

<!-- Wallet History -->
<div class="panel">
  <h2>Wallet History</h2>
  <ul id="walletHistory"><li>No transactions yet.</li></ul>
</div>

<!-- TraderLab Assessment -->
<div class="panel">
  <h2>TraderLab Assessment</h2>
  <p class="notice">TraderLab trains discipline and alignment. It does not execute trades.</p>
  <button id="startAssessmentBtn">Start Assessment</button>
  <p id="assessmentStatus"></p>
</div>

</main>

<script type="module">
import Wallet, { checkWallet } from './wallet.js';

const currentUserId = localStorage.getItem('qtai_userId') || 'guest';

/* ============================
   ORI OLOGO
============================ */
const oriSpeech = document.getElementById("oriSpeech");
function oriSpeak(text) { oriSpeech.textContent = text; }

/* ============================
   WALLET UI & HISTORY
============================ */
const walletStatusEl = document.getElementById("walletStatus");
const walletBalanceEl = document.getElementById("walletBalance");
const walletAmountEl = document.getElementById("walletAmount");
const walletMsgEl = document.getElementById("walletMsg");
const fundWalletBtn = document.getElementById("fundWalletBtn");
const walletHistoryEl = document.getElementById("walletHistory");

function refreshWalletUI() {
  const balance = Wallet.getBalance(currentUserId);
  walletStatusEl.textContent = balance > 0 ? "Active" : "Inactive";
  walletBalanceEl.textContent = "â‚¦" + balance.toLocaleString();
  refreshWalletHistory();
}

function refreshWalletHistory() {
  const history = Wallet.getHistory(currentUserId);
  if (!history || history.length === 0) {
    walletHistoryEl.innerHTML = "<li>No transactions yet.</li>";
    return;
  }
  walletHistoryEl.innerHTML = history.slice().reverse().map(h =>
    `<li>[${new Date(h.time).toLocaleString()}] <strong>${h.type.toUpperCase()}</strong>: â‚¦${h.amount.toFixed(2)} ${h.note ? `(${h.note})` : ""}</li>`
  ).join("");
}

/* ============================
   FUND WALLET
============================ */
const MIN_FUND = 10000;

fundWalletBtn.onclick = () => {
  const amount = Number(walletAmountEl.value);
  if (amount < MIN_FUND) {
    walletMsgEl.textContent = `Minimum trading capital is â‚¦${MIN_FUND}`;
    return;
  }
  Wallet.deposit(currentUserId, amount, "TraderLab funding");
  walletMsgEl.textContent = "Wallet funded successfully âœ”";
  walletAmountEl.value = "";
  refreshWalletUI();
  oriSpeak("Capital acknowledged. Remember: possession of capital does not compel action.");
};

/* ============================
   TRADERLAB ASSESSMENT
============================ */
document.getElementById("startAssessmentBtn").onclick = () => {
  oriSpeak("TraderLab session initiated. This environment trains judgment, not execution.");
  document.getElementById("assessmentStatus").textContent = "Assessment running (logic continues as previously designed).";
};

/* ============================
   INIT
============================ */
refreshWalletUI();
oriSpeak("TraderLab ready. Fund your wallet deliberately. Trade only when clarity exists.");
</script>

</body>
</html>
