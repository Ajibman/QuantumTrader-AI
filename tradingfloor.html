 <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QuantumTrader AIâ„¢ â€” Trading Floor</title>

<style>
:root {
  --bg:#050b1f;
  --card:#0b1736;
  --panel:#0e1f44;
  --accent:#7cf3ff;
  --text:#ffffff;
  --notice:#ffcc66;
  --success:#0aff7c;
  --error:#ff4d4d;
}

body {
  margin:0;
  font-family:Segoe UI, sans-serif;
  background:var(--bg);
  color:var(--text);
}

header {
  padding:1.2rem 2rem;
  background:var(--card);
}

main {
  max-width:1000px;
  margin:auto;
  padding:2rem;
}

.panel {
  background:var(--panel);
  border-radius:1rem;
  padding:1.4rem;
  margin-bottom:1.6rem;
}

h2 { color:var(--accent); margin-top:0; }
.notice { color:var(--notice); font-size:0.9rem; }

button {
  padding:0.7rem 1.4rem;
  border-radius:0.7rem;
  border:none;
  background:var(--accent);
  font-weight:600;
  cursor:pointer;
}

button:disabled { opacity:0.5; cursor:not-allowed; }

input, select {
  width:100%;
  padding:0.7rem;
  border-radius:0.5rem;
  border:none;
  margin:0.6rem 0;
}

#history {
  max-height:220px;
  overflow-y:auto;
  padding-left:1rem;
}

#ori {
  border-left:4px solid var(--accent);
  padding-left:1rem;
}
</style>
</head>

<body>

<header>
  <h1>Trading Floor â€” Manual Execution</h1>
  <p class="notice">Capital deployment requires intention and restraint</p>
</header>

<main>

<!-- Ori Ologo -->
<div class="panel" id="ori">
  <strong>ðŸ§  Ori Ologo</strong>
  <p id="oriSpeech"></p>
</div>

<!-- Wallet -->
<div class="panel">
  <h2>Wallet Status</h2>
  <p>Balance: <strong>â‚¦<span id="walletBalance">0.00</span></strong></p>
</div>

<!-- Trade Panel -->
<div class="panel">
  <h2>Manual Trade</h2>
  <p class="notice">
    Manual trades simulate execution discipline.  
    Capital is returned; profit or loss is recorded.
  </p>

  <input type="number" id="tradeAmount" placeholder="Trade capital (â‚¦)" min="10000">
  
  <select id="tradeOutcome">
    <option value="">Select Outcome</option>
    <option value="profit">Profit</option>
    <option value="loss">Loss</option>
  </select>

  <input type="number" id="tradeValue" placeholder="Profit / Loss amount (â‚¦)">

  <button id="executeTradeBtn">Execute Trade</button>

  <p id="tradeMsg" class="notice"></p>
</div>

<!-- History -->
<div class="panel">
  <h2>Trade History</h2>
  <ul id="history"><li>No trades yet.</li></ul>
</div>

</main>

<script type="module">
import Wallet from './wallet.js';

const userId = localStorage.getItem('qtai_userId') || 'guest';

/* =========================
   ORI OLOGO
========================= */
const oriSpeech = document.getElementById("oriSpeech");
function oriSpeak(msg){ oriSpeech.textContent = msg; }

/* =========================
   WALLET UI
========================= */
function refreshWallet() {
  document.getElementById("walletBalance").textContent =
    Wallet.getBalance(userId).toFixed(2);
}

/* =========================
   HISTORY
========================= */
function refreshHistory() {
  const history = Wallet.getHistory(userId);
  const el = document.getElementById("history");

  if (!history.length) {
    el.innerHTML = "<li>No trades yet.</li>";
    return;
  }

  el.innerHTML = history
    .filter(h => h.type === "manualTrade")
    .reverse()
    .map(h => `
      <li>
        [${new Date(h.time).toLocaleString()}]
        ${h.outcome.toUpperCase()} â€”
        â‚¦${h.amount.toFixed(2)}
      </li>
    `).join("");
}

/* =========================
   TRADE EXECUTION
========================= */
document.getElementById("executeTradeBtn").onclick = () => {
  const capital = Number(document.getElementById("tradeAmount").value);
  const outcome = document.getElementById("tradeOutcome").value;
  const value = Number(document.getElementById("tradeValue").value);
  const msg = document.getElementById("tradeMsg");

  if (capital < 10000) {
    msg.textContent = "Minimum trade capital is â‚¦10,000.";
    return;
  }

  if (!outcome || value <= 0) {
    msg.textContent = "Define trade outcome and value.";
    return;
  }

  if (capital > Wallet.getBalance(userId)) {
    msg.textContent = "Insufficient wallet balance.";
    return;
  }

  const signedAmount = outcome === "profit" ? value : -value;

  Wallet.recordHistory(userId, {
    type: "manualTrade",
    amount: signedAmount,
    outcome,
    capital
  });

  Wallet.adjustBalance(userId, signedAmount);

  msg.textContent = "Trade recorded successfully.";
  refreshWallet();
  refreshHistory();

  oriSpeak(
    outcome === "profit"
      ? "Profit logged. Do not let success impair judgment."
      : "Loss logged. Preservation of capital precedes confidence."
  );
};

/* =========================
   INIT
========================= */
refreshWallet();
refreshHistory();
oriSpeak("Trading Floor ready. Execute only when conviction outweighs impulse.");
</script>

</body>
</html>
