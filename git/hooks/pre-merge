ln -sf /pre-merge.sh .git/hooks/pre-merge

#!/bin/bash
# pre-merge.sh - Auto stage and log during merges with safety checks

set -e  # exit immediately if a command fails

# Ensure TEST_LOG.md exists
if [ ! -f TEST_LOG.md ]; then
  echo "❌ TEST_LOG.md missing. Aborting merge."
  exit 1
fi

# Stage all changes
git add -A

# Append merge info to TEST_LOG.md
echo -e "\n[AutoMerge] $(date '+%Y-%m-%d %H:%M:%S') - Merge initiated" >> TEST_LOG.md

# Show staged changes
git status --short

echo "✅ Auto-staging and logging done. Proceeding with merge."
exit 0
