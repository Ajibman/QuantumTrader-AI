<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QuantumTrader AI</title>

  <link rel="stylesheet" href="qtai.css" />

  <style>
    .module { display: none; margin-top: 10px; }
    .module.active { display: block; }

    #globe-container,
    #tradingfloor-apex,
    #main-nav,
    #payment-section {
      text-align: center;
      margin: 20px 0;
    }

    #practice-dashboard {
      border: 1px solid #ccc;
      padding: 12px;
      margin: 10px auto;
      max-width: 520px;
      text-align: center;
      border-radius: 6px;
    }

    .nav-btn {
      margin: 0 5px;
      padding: 8px 16px;
      cursor: pointer;
    }

    #start-autotrader {
      background: #0a7d32;
      color: #fff;
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      font-size: 15px;
      cursor: pointer;
      margin-top: 15px;
    }

    #start-autotrader:disabled {
      background: #999;
      cursor: not-allowed;
    }

    .cpilot-status {
      margin-top: 10px;
      font-weight: bold;
    }

    .tp-group {
      margin-top: 12px;
    }

    .tp-group label {
      margin-right: 10px;
      display: inline-block;
    }
  </style>
</head>

<body>

  <!-- üåç Globe -->
  <section id="globe-container">
    <img src="qtai_globe.png" alt="QuantumTrader AI Globe" width="300">
  </section>

  <!-- üî∫ TradingFloor Apex -->
  <section id="tradingfloor-apex">
    <img src="tradingfloor2_main.png" alt="Trading Floor Apex" width="300">
  </section>

  <!-- üìä Practice Dashboard -->
  <div id="practice-dashboard">
    <h3>Practice Dashboard</h3>
    <p>Status: Simulation Mode</p>
    <div id="walletDisplay">Balance: 0</div>
  </div>

  <!-- üß© Modules -->
  <section id="modules">

    <!-- Trading Floor -->
    <div class="module active" id="tradingfloor">
      <div class="tf-feed"></div>
    </div>

    <!-- TraderLab -->
    <div class="module" id="traderlab">
      <h3>TraderLab Simulation</h3>

      <!-- Asset Class -->
      <div style="margin-top:10px;">
        <label><strong>Asset Class</strong></label><br>
        <select id="asset-class">
          <option value="crypto">Crypto</option>
          <option value="forex">Forex</option>
          <option value="commodity">Commodity</option>
        </select>
      </div>

      <!-- Asset Selector -->
      <div style="margin-top:10px;">
        <label><strong>Asset</strong></label><br>
        <select id="asset-select">
          <option value="BTC">BTC</option>
          <option value="ETH">ETH</option>
          <option value="SOL">SOL</option>
        </select>
      </div>

      <div class="trade-result" style="margin-top:10px;"></div>
    </div>

    <!-- CPilot -->
    <div class="module" id="cpilot">
      <img src="qtai_cpilot_panel.png" alt="CPilot Panel" width="300">

      <!-- Take Profit (Seconds) -->
      <div class="tp-group">
        <label><strong>Take Profit (Seconds)</strong></label><br>
        <select id="cpilot-duration-seconds">
          <option value="30">30 Seconds</option>
          <option value="60">60 Seconds</option>
          <option value="120">120 Seconds</option>
          <option value="180">180 Seconds</option>
          <option value="240">240 Seconds</option>
          <option value="300">300 Seconds</option>
        </select>
      </div>

      <!-- Take Profit (Days) -->
      <div class="tp-group">
        <label><strong>Take Profit (Days)</strong></label><br>
        <label><input type="radio" name="tp-days" value="1"> 1 Day</label>
        <label><input type="radio" name="tp-days" value="2"> 2 Days</label>
        <label><input type="radio" name="tp-days" value="3"> 3 Days</label>
        <label><input type="radio" name="tp-days" value="4"> 4 Days</label>
        <label><input type="radio" name="tp-days" value="5"> 5 Days</label>
        <label><input type="radio" name="tp-days" value="6"> 6 Days</label>
        <label><input type="radio" name="tp-days" value="7"> 7 Days</label>
      </div>

      <!-- AutoTrader -->
      <button id="start-autotrader">Start AutoTrader</button>
      <div class="cpilot-status" id="autotrader-status">
        AutoTrader idle (simulation)
      </div>
    </div>

  </section>

  <!-- üß≠ Navigation -->
  <nav id="main-nav">
    <button class="nav-btn" data-target="tradingfloor">Trading Floor</button>
    <button class="nav-btn" data-target="traderlab">TraderLab</button>
    <button class="nav-btn" data-target="cpilot">CPilot</button>
  </nav>

  <!-- üí≥ Support -->
  <section id="payment-section">
    <h2>Support QuantumTrader-AI Innovation</h2>
    <p><strong>Account Name:</strong> Olagoke Ajibulu</p>
    <p><strong>Bank:</strong> Wema Bank Plc</p>
    <p><strong>Account Number:</strong>0299134895</p>
    <img src="alat_qr.png" width="150">
  </section>

<img src="qtai_ori_olokun.png" width="200" style="margin-top:15px;">
  
  <!-- ‚öôÔ∏è Core Engines -->
  <script src="app.js"></script>
  <script src="practice_traderlab_engine.js"></script>
  <script src="practice_tradingfloor_engine.js"></script>
  <script src="practice_cpilot_engine.js"></script>
  <script src="practice_core_engine.js"></script>
  <script src="practice_dashboard.js"></script>

  <!-- üîê Wallet -->
  <script src="wallet.js"></script>

  <!-- üîó UI + CPilot + Wallet + AutoTrader Integration -->
  <script>
    const USER_ID = "qtai_primary_user";

    Wallet.createWallet(USER_ID);
    document.getElementById("walletDisplay").textContent =
      `Balance: ${Wallet.balance}`;

    // Navigation
    document.querySelectorAll('.nav-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.module')
          .forEach(m => m.classList.remove('active'));
        document.getElementById(btn.dataset.target)
          .classList.add('active');
      });
    });

    // Take Profit Resolver
    function resolveTakeProfitDuration() {
      const dayChoice = document.querySelector('input[name="tp-days"]:checked');
      if (dayChoice) return parseInt(dayChoice.value, 10) * 86400;
      return parseInt(document.getElementById('cpilot-duration-seconds').value, 10);
    }

    const autoBtn = document.getElementById('start-autotrader');
    const statusEl = document.getElementById('autotrader-status');
    const tpSeconds = document.getElementById('cpilot-duration-seconds');
    const tpDays = document.querySelectorAll('input[name="tp-days"]');

    // Visual lock: mutual exclusivity
    tpDays.forEach(radio => {
      radio.addEventListener('change', () => {
        tpSeconds.disabled = radio.checked;
      });
    });

    tpSeconds.addEventListener('change', () => {
      tpDays.forEach(radio => radio.checked = false);
      tpSeconds.disabled = false;
    });

    // TraderLab asset-class & asset dynamic selection
    const assetClassSelect = document.getElementById('asset-class');
    const assetSelect = document.getElementById('asset-select');
    let selectedAsset = assetSelect.value;

    assetSelect.addEventListener('change', () => selectedAsset = assetSelect.value);

    assetClassSelect.addEventListener('change', () => {
      const cls = assetClassSelect.value;
      let options = '';
      if (cls === 'crypto') {
        options = `<option value="BTC">BTC</option>
                   <option value="ETH">ETH</option>
                   <option value="SOL">SOL</option>`;
      } else if (cls === 'forex') {
        options = `<option value="EURUSD">EUR/USD</option>
                   <option value="GBPUSD">GBP/USD</option>`;
      } else if (cls === 'commodity') {
        options = `<option value="GOLD">Gold</option>
                   <option value="OIL">Oil</option>`;
      }
      assetSelect.innerHTML = options;
      selectedAsset = assetSelect.value;
    });

    // AutoTrader click logic
    autoBtn.addEventListener('click', () => {
      const durationSeconds = resolveTakeProfitDuration();

      let debitAmount = 10;
      const daySelected = document.querySelector('input[name="tp-days"]:checked');
      if (daySelected) debitAmount = 10 * parseInt(daySelected.value, 10);

      if (!Wallet.debit(debitAmount, USER_ID)) {
        statusEl.textContent = 'Insufficient wallet balance';
        return;
      }

      document.getElementById("walletDisplay").textContent =
        `Balance: ${Wallet.balance}`;

      statusEl.textContent =
        `AutoTrader ACTIVE (simulation) ‚Äî ${selectedAsset} ‚Äî ${durationSeconds}s`;

      autoBtn.disabled = true;

      setTimeout(() => {
        statusEl.textContent =
          `AutoTrader completed (simulation) ‚Äî ${selectedAsset}`;
        autoBtn.disabled = false;

        const tradeResultDiv = document.querySelector('#traderlab .trade-result');
        tradeResultDiv.textContent = `Simulated trade completed on ${selectedAsset}.`;
      }, durationSeconds * 1000);
    });
  </script>

  <!-- QR code container -->
<img id="alat-qr-container" src="" style="display:none;" alt="QT AI QR Code">

<!-- XT Logical Module Script -->
<script src="assets/js/xt_logical_module.js"></script><!-- DEV ONLY: Exclusive Trader Setup (REMOVE BEFORE PUBLIC RELEASE) -->
<script>
  (function () {
    // Set Exclusive Trader role
    if (!localStorage.getItem("qtai_user_role")) {
      localStorage.setItem("qtai_user_role", "exclusive_trader");
    }
    
<script>
  (function () {
    const PRIVATE_MODE = true; // üî¥ SET TO false OR REMOVE FOR PRODUCTION

    if (!PRIVATE_MODE) return;

    // Set Exclusive Trader role
    if (!localStorage.getItem("qtai_user_role")) {
      localStorage.setItem("qtai_user_role", "exclusive_trader");
    }
      
<!-- REMOVE BEFORE PUBLIC RELEASE -->
<!-- DEV ONLY: Exclusive Trader Setup + Reminders + Countdown -->
<script>
  (function () {
    const PRIVATE_MODE = true; // üî¥ toggle false or remove for production
    if (!PRIVATE_MODE) return;

    // 1Ô∏è‚É£ Set Exclusive Trader role if missing
    if (!localStorage.getItem("qtai_user_role")) {
      localStorage.setItem("qtai_user_role", "exclusive_trader");
    }

    // 2Ô∏è‚É£ Start subscription clock if missing
    if (!localStorage.getItem("qtai_subscription_start")) {
      localStorage.setItem(
        "qtai_subscription_start",
        new Date().toISOString()
      );
    }

    // 3Ô∏è‚É£ Create banner
    const reminderDiv = document.createElement("div");
    reminderDiv.style.position = "fixed";
    reminderDiv.style.top = "0";
    reminderDiv.style.left = "0";
    reminderDiv.style.width = "100%";
    reminderDiv.style.backgroundColor = "#fffae6";
    reminderDiv.style.color = "#222";
    reminderDiv.style.fontFamily = "sans-serif";
    reminderDiv.style.fontSize = "14px";
    reminderDiv.style.fontWeight = "bold";
    reminderDiv.style.padding = "0.5rem";
    reminderDiv.style.textAlign = "center";
    reminderDiv.style.zIndex = "9999";
    reminderDiv.style.borderBottom = "2px solid #f0c000";
    document.body.prepend(reminderDiv);

    // 4Ô∏è‚É£ Countdown function
    function updateCountdown() {
      const start = localStorage.getItem("qtai_subscription_start");
      if (!start) return;

      const startDate = new Date(start);
      const durationDays = 30;
      const expiry = new Date(startDate);
      expiry.setDate(expiry.getDate() + durationDays);

      const now = new Date();
      let diff = expiry - now;

      if (diff <= 0) {
        reminderDiv.innerText =
          "‚ö†Ô∏è PRIVATE_MODE ACTIVE | Subscription Expired | Exclusive Trader Phase ‚ö†Ô∏è";
        reminderDiv.style.backgroundColor = "#ffe6e6";
        return;
      }

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      const minutes = Math.floor((diff / (1000 * 60)) % 60);
      const seconds = Math.floor((diff / 1000) % 60);

      reminderDiv.innerText =
        `‚ö†Ô∏è PRIVATE_MODE ACTIVE | Exclusive Trader Role | Subscription Time Left: ` +
        `${days}d ${hours}h ${minutes}m ${seconds}s ‚ö†Ô∏è`;
    }

    // 5Ô∏è‚É£ Initial update & interval
    updateCountdown();
    setInterval(updateCountdown, 1000); // refresh every second
  })();
</script>
  
</body>
</html>
